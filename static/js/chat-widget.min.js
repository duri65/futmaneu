"use strict";(function(){"use strict";var n="";var s=false;var i;var r=1e3;var o=false;var l=true;function c(e){var t;for(var a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++){n[i-1]=arguments[i]}if(s)(t=console).log.apply(t,[e].concat(n))}function d(e,t){var a=new XMLHttpRequest;a.responseType="json";a.overrideMimeType("application/json");a.open("GET",e,true);a.onreadystatechange=function(){if(a.readyState===4&&a.status=="200"){t(a.response)}};a.send()}function u(e){return new Promise(function(a,n){var i=new XMLHttpRequest;i.responseType="json";i.open("POST",e,true);i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");i.onreadystatechange=function(e){if(i.readyState===4){if(i.status===200){a(i.response)}else{var t={status:i.status,body:i.response};n(t)}}};i.send()})}function f(t,a,n){u(n.statisticUrl).then(function(e){o=e.value>0;w(t,a,n)},function(e){o=false;w(t,a,n)})}function h(t,a,n){if(!l||n.statisticTimeout===0){return}var e=n.statisticUrl;setTimeout(function(){u(e).then(function(e){c("getInternalStatisticPromise.resp.success",e);o=e.value>0;w(t,a,n);h(t,a,n)},function(e){c("getInternalStatisticPromise.resp.error",e);o=false;w(t,a,n);h(t,a,n)})},n.statisticTimeout)}function m(t,a,n,i){setTimeout(function(){var e=p(t);i++;if(i<15&&e.length===0){m(t,a,n,i)}if(e.length===1){w(t,a,n)}},100)}function w(e,t,a){var n=p(e);c("handleChatButton.btn",o,n);if(n.length===0){return false}if(o){n.removeClass("alc-not-available");n.addClass("alc-available");n.off();n.click(function(e){t.command("WebChat.open").done(function(e){c("WebChat.open.success",e)}).fail(function(e){c("WebChat.open.err",e)});return false})}else{n.removeClass("alc-available");n.addClass("alc-not-available");n.off();n.click(function(e){window.open(a.notAvailableUrl,"_self");return false})}return true}function p(e){return e(".cx-widget .cx-webchat-chat-button")}(function e(){var t=window.location.protocol+"//"+window.location.hostname+window.location.pathname;c("init.location",t);var a=function e(i){if(!window._genesys)window._genesys={};if(!window._gt)window._gt=[];window._genesys.widgets={onReady:function e(t){c("widgets.onReady");t.subscribe("WebChatService.error",function(e){c("WebChatService.error",e)})},main:{debug:false,theme:"dark",lang:"en",timeFormat:24,customStylesheetID:"custom-genesys-widgets-styles",preload:[],i18n:n+"resources/i18n.json"},webchat:{userData:{},emojis:false,timeFormat:24,maxMessageLength:i.maxMessageLength,cometD:{enabled:false},autoInvite:{enabled:false,timeToInviteSeconds:5,inviteTimeoutSeconds:30},chatButton:{enabled:true,openDelay:r,effectDuration:300,hideDuringInvite:true},uploadsEnabled:false,dataURL:i.GMSChatURL,apikey:"",form:b(i)}};if(!window._genesys.widgets.extensions){window._genesys.widgets.extensions={}}window._genesys.widgets.extensions.alcExt=function(a,e,t){var n=e.registerPlugin("alcExt");n.subscribe("App.ready",function(e){c("ext.App.ready")});n.subscribe("WebChat.ready",function(e){c("ext.WebChat.ready",e);o=false;if(i.statisticTimeout===0){o=true}else{f(a,n,i)}l=true;h(a,n,i);var t=0;m(a,n,i,t);w(a,n,i)});n.subscribe("WebChat.opened",function(e){c("ext.WebChat.opened",e);l=false});n.subscribe("WebChat.closed",function(e){c("ext.WebChat.closed",e);l=true;h(a,n,i)})};(function(r){var e=function e(){var t=r.location;r.aTags=r.aTags||[];for(var a=0;a<r.aTags.length;a++){var n=r.aTags[a];var i=t.getElementsByTagName(n.type)[0],s;if(t.getElementById(n.id))return;s=t.createElement(n.type);s.id=n.id;if(n.type=="script"){s.src=n.path}else{s.type="text/css";s.rel="stylesheet";s.href=n.path}if(i){i.parentNode.insertBefore(s,i)}else{t.head.appendChild(s)}}},t=window.onload;if(r.onload){typeof window.onload!="function"?window.onload=e:window.onload=function(){t();e()}}else e()})({location:document,onload:false,aTags:[{type:"script",id:"genesys-cx-widget-script",path:n+"resources/widgets.min.js"},{type:"link",id:"genesys-cx-widget-styles",path:n+"resources/widgets.min.css"},{type:"link",id:"custom-genesys-widgets-styles",path:n+"resources/style.css"}]})};d(n+"widget-config.json",function(e){i=e;a(i)})})();function b(e){var t={wrapper:"<table></table>",inputs:[{id:"cx_webchat_form_firstname",name:"firstname",maxlength:"100",placeholder:"@i18n:webchat.ChatFormPlaceholderFirstName",label:"@i18n:webchat.ChatFormFirstName",validateWhileTyping:false,validate:function e(t,a,n,i,s,r,o){if(n){if(n.val()!==undefined&&n.val()!==""){return true}if(n.val()===undefined||n.val()===""){n["class"]="cx-error";return false}}return false}},{id:"cx_webchat_form_lastname",name:"lastname",maxlength:"100",placeholder:"@i18n:webchat.ChatFormPlaceholderLastName",label:"@i18n:webchat.ChatFormLastName",validateWhileTyping:false,validate:function e(t,a,n,i,s,r,o){if(n){if(n.val()!==undefined&&n.val()!==""){return true}if(n.val()===undefined||n.val()===""){n["class"]="cx-error";return false}}return false}},{id:"cx_webchat_form_email",name:"email",maxlength:"100",placeholder:"@i18n:webchat.ChatFormPlaceholderEmail",label:"@i18n:webchat.ChatFormEmail",validate:function e(t,a,n,i,s,r,o){if(n){if(n.val()!==undefined&&n.val()!==""){var l=n.val();var c=/(\w+@{1}\w+\.{1}\w+)/;if(l&&l.search(c)>-1){s("#cx_webchat_email").val(n.val());s("#cx_webchat_form_email").removeClass("cx-error");return true}else{n["class"]="cx-error";return false}}if(n.val()===undefined||n.val()===""){n["class"]="cx-error";return false}}}},{id:"cx_webchat_form_eic",name:"alcs_EICPOD",maxlength:"80",placeholder:"@i18n:webchat.ChatFormPlaceholderEic",label:"@i18n:webchat.ChatFormEic"},{id:"cx_webchat_particulars",name:"particulars",type:"checkbox",checked:false,label:"@i18n:webchat.ChatFormParticulars"},{id:"cx_webchat_transcript",name:"alcs_Transcript",type:"checkbox",checked:false,label:"@i18n:webchat.ChatFormTranscript"},{id:"cx_webchat_email",name:"emailAddress",type:"hidden"},{id:"cx_webchat_sourceWeb",name:"alcs_sourceWeb",type:"hidden",value:e.alcs_sourceWeb}]};return t}})();
